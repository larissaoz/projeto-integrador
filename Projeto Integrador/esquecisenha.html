<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ImmunoTrack - Recuperar Senha</title>
    <style>
        /* Estilos básicos para centralização e aparência */
        body {
            font-family: Arial, sans-serif;
            background-color: #f4f7f6;
            margin: 0;
            padding: 0;
            display: flex;
            justify-content: center;
            align-items: center;
            min-height: 100vh;
        }
        .container {
            max-width: 450px;
            width: 100%;
            padding: 30px;
            background: white;
            border-radius: 8px;
            box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
        }
        h2 {
            text-align: center;
            color: #007bff;
            margin-bottom: 25px;
        }
        label {
            display: block;
            margin-bottom: 5px;
            font-weight: bold;
            color: #333;
        }
        input[type="text"], input[type="password"] {
            width: 100%;
            padding: 10px;
            margin-bottom: 20px;
            box-sizing: border-box;
            border: 1px solid #ccc;
            border-radius: 4px;
        }
        button {
            width: 100%;
            padding: 12px;
            background-color: #28a745;
            color: white;
            border: none;
            border-radius: 4px;
            cursor: pointer;
            font-weight: bold;
            transition: background-color 0.3s;
        }
        button:hover {
            background-color: #218838;
        }
        .link-back {
            display: block;
            text-align: center;
            margin-top: 20px;
            color: #007bff;
            text-decoration: none;
        }
        
        /* Classes para controle de visibilidade */
        .tela {
            display: none; /* Esconde todas as telas por padrão */
        }
        .tela.active {
            display: block; /* Mostra apenas a tela com a classe 'active' */
        }
    </style>
</head>
<body>
    <div class="container">

        <div id="tela-cpf" class="tela active">
            <h2 id="titulo-tela-1">Recuperação de Senha</h2>
            
            <p style="text-align: center; margin-bottom: 30px;">
                Para iniciar o processo, informe o CPF cadastrado na sua conta ImmunoTrack.
            </p>
            
            <form id="form-cpf">
                <div>
                    <label for="cpf_recover">CPF</label>
                    <input 
                        type="text" 
                        id="cpf_recover" 
                        name="cpf" 
                        placeholder="00000000000" 
                        maxlength="11" 
                        pattern="[0-9]{11}" 
                        inputmode="numeric" 
                        required 
                    >
                </div>
                
                <button type="submit">
                    ENVIAR CÓDIGO
                </button>
            </form>
            
            <a href="#" onclick="history.back(); return false;" class="link-back">&larr; Voltar para Login</a>
        </div>


        <div id="tela-codigo" class="tela">
            <h2>Verificação de Segurança</h2>
            
            <p id="instrucao-codigo" style="text-align: center; margin-bottom: 30px;">
                Enviamos um código de 6 dígitos para o **e-mail/celular** associado ao seu CPF. Digite-o abaixo.
            </p>
            
            <form id="form-codigo">
                <div>
                    <label for="code_input">Código de Verificação</label>
                    <input 
                        type="text" 
                        id="code_input" 
                        name="code" 
                        maxlength="6" 
                        pattern="[0-9]{6}" 
                        inputmode="numeric" 
                        required 
                    >
                </div>
                
                <button type="submit">
                    CONTINUAR
                </button>
            </form>

            <p style="text-align: center; margin-top: 10px;">
                Não recebeu o código? <a href="#" id="link-reenviar" style="color: #dc3545; text-decoration: none;">Reenviar Código</a>
            </p>
        </div>


        <div id="tela-nova-senha" class="tela">
            <h2>Defina Sua Nova Senha</h2>
            
            <p style="text-align: center; margin-bottom: 30px;">
                Crie uma nova senha forte. Ela deve conter no mínimo 8 caracteres (letras, números e símbolos).
            </p>
            
            <form id="form-nova-senha">
                <div>
                    <label for="new_password">Nova Senha</label>
                    <input 
                        type="password" 
                        id="new_password" 
                        name="new_password" 
                        minlength="8" 
                        required 
                    >
                </div>
                
                <div>
                    <label for="confirm_password">Confirme a Nova Senha</label>
                    <input 
                        type="password" 
                        id="confirm_password" 
                        name="confirm_password" 
                        minlength="8" 
                        required 
                    >
                </div>
                
                <button type="submit">
                    SALVAR NOVA SENHA
                </button>
            </form>
        </div>
        
    </div>

    <script>
        // Função para alternar a visibilidade das telas
        function showScreen(screenId) {
            document.querySelectorAll('.tela').forEach(tela => {
                tela.classList.remove('active');
            });
            document.getElementById(screenId).classList.add('active');
        }

        // --- Simulação de Fluxo de Navegação ---

        // 1. Ao submeter a TELA 1 (CPF)
        document.getElementById('form-cpf').addEventListener('submit', function(e) {
            e.preventDefault();
            // **IMPORTANTE:** Aqui, você faria uma chamada API para enviar o CPF e receber uma confirmação.
            // Se a API retornar sucesso:
            alert("Código enviado! (Simulação)"); 
            
            // Simulação de atualização do texto com o e-mail parcial
            document.getElementById('instrucao-codigo').innerHTML = 
                "Enviamos um código de 6 dígitos para o **e-mail/celular** associado ao seu CPF. Digite-o abaixo.";

            showScreen('tela-codigo'); // Vai para a TELA 2
        });

        // 2. Ao submeter a TELA 2 (Código)
        document.getElementById('form-codigo').addEventListener('submit', function(e) {
            e.preventDefault();
            const codigo = document.getElementById('code_input').value;

            // **IMPORTANTE:** Aqui, você faria uma chamada API para validar o código.
            if (codigo === '123456') { // Simulação de código correto
                alert("Código validado com sucesso! (Simulação)");
                showScreen('tela-nova-senha'); // Vai para a TELA 3
            } else {
                alert("Código inválido. Tente novamente.");
            }
        });

        // 3. Ao submeter a TELA 3 (Nova Senha)
        document.getElementById('form-nova-senha').addEventListener('submit', function(e) {
            e.preventDefault();
            const novaSenha = document.getElementById('new_password').value;
            const confirmaSenha = document.getElementById('confirm_password').value;

            if (novaSenha !== confirmaSenha) {
                alert("As senhas não coincidem.");
                return;
            }

            // **IMPORTANTE:** Aqui, você faria uma chamada API para salvar a nova senha.
            // Se a API retornar sucesso:
            alert("Sua senha foi alterada com sucesso! Você será redirecionado para o login. (Simulação)");
            // Redirecionamento real: window.location.href = 'login.html';
        });
        
        // Simulação do botão Reenviar Código
        document.getElementById('link-reenviar').addEventListener('click', function(e) {
            e.preventDefault();
            alert("Novo código reenviado! (Simulação)");
            // Aqui, você faria uma nova chamada API para reenviar o código.
        });
    </script>
</body>
</html>